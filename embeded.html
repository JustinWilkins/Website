<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/10.2.0/mocha.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;500;700&display=swap"
    rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/10.2.0/mocha.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.3.7/chai.min.js"></script>



<style>
    #runTests {
        padding: 10px 20px;
        background: #2e2e52;
        color: #fff;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.3s;
        margin-top: 20px;
    }

    #runTests:hover {
        background: #4a4a84;
    }

    .test-container {
        display: flex;
        gap: 20px;
        margin-top: 20px;
    }

    .test-panel,
    .mocha-panel {
        width: 50%;
        background: #1a1a2e;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        color: #d3d3d3;
        min-height: 200px;
    }

    .mocha-panel {
        overflow-y: auto;
    }
</style>

<script>
    const { expect } = chai;

    document.getElementById("runTests").addEventListener("click", () => {
        const panel = document.getElementById('testPanel');
        panel.innerHTML = '';

        const header = document.querySelector('button.accordion-header');
        const item = document.querySelector('.accordion-item');

        const step1 = document.createElement('p');
        step1.textContent = 'Clicking accordion header...';
        panel.appendChild(step1);

        header.click();

        setTimeout(() => {
            const step2 = document.createElement('p');
            step2.textContent = `Accordion item has 'active' class: ${item.classList.contains('active')}`;
            panel.appendChild(step2);
        }, 400);

        const mochaPanel = document.getElementById("mocha");
        mochaPanel.innerHTML = '';

        const myMocha = new Mocha({
            ui: 'bdd',
            reporter: 'html',
            reporterOptions: { element: mochaPanel }
        });

        myMocha.suite.emit('pre-require', window, null, myMocha);

        it("Should display accordion content when accordion header is clicked", (done) => {
            const header = document.querySelector('.accordion-header');
            const item = document.querySelector('.accordion-item');
            const content = document.querySelector('.accordion-content');

            header.click();
            setTimeout(() => {
                try {
                    expect(item.classList.contains('active')).to.be.true;

                    expect(content.offsetHeight).to.be.greaterThan(0);

                    done();
                } catch (err) {
                    done(err);
                }
            }, 500);
        });

        myMocha.run();
    });
</script>


<h3>Run Embedded Tests</h3>
<button id="runTests">Run Tests</button>

<div class="test-container">
    <div class="test-panel" id="testPanel">Test simulation output will appear here</div>
    <div class="mocha-panel" id="mocha"></div>
</div>